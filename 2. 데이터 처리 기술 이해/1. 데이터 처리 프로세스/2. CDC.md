# CDC(Change Data Capture)

- 데이터베이스 내 데이터의 **변경을 식별해, 후속처리를 자동화**하는 기술 또는 설계 기법이자 구조이다.
- **실시간 또는 근접 실시간 데이터 통합**을 기반으로 하는 데이터 저장소 구축에 폭 넓게 활용된다.
- 스토리지 하드웨어 계층부터 애플리케이션 계층에 이르기까지 **다양한 계층에서 다양한 기술**로 구현 가능하다.
- 단일 정보 시스템 내에 다수의 CDC 매커니즘이 동작할 수 있다.

## 구현 기법

### Time Stamp on Rows

- 별도의 변경 시각을 기록해두고, 테이블 내 레코드의 마지막 변경 시점을 기록하는 **타임스탬프 컬럼**을 둬서, 변경 시각과 해당 타임스탬프 값이 다를 경우 해당 레코드는 변경된 것으로 식별하는 기법이다.

### Version Numbers on Rows

- 테이블 내 해당 **레코드의 버전을 기록**하는 칼럼을 두고, 기 식별된 레코드 버전보다 더 높은 버전을 보유한 레코드는 변경된 것으로 식별하는 기법이다.
- 레코드별 최신 버전을 기록하는 '참조 테이블'과 함께 운영하는 경우가 많다.

### Status on Rows

- 타임 스탬프 및 버전 넘버 기법에 대한 **보완 용도로 활용**되며, Boolean 상태 컬럼을 둬서 해당 컬럼에 변경 여부를 직접 표기하는 기법이다.

### Time/Version/Stattus on Rows

- 앞선 세가지 특성을 모두 활용하는 기법이다.
- 정교한 쿼리 생성에 활용해 개발에 유연성을 제공할 수 있다.

### Triggers on Tables

- 데이터베이스 트리거를 활용해, 사전 등록된 대상에 변경 데이터를 배포하는 형태로 CDC를 구현하는 기법이다.
- 시스템 관리 복잡도 증가, 변경 관리의 어려움, 확장성의 감소를 유발하는 등 전반적인 시스템 유지보수성을 저하시키는 특성이 있어 사용에 주의를 요한다.

### Event Programming

- 데이터 변경 식별 기능을 애플리케이션에 구현하여, 다양한 조건에 의한 CDC 매커니즘을 구현할 수 있는 기법이다.
- 애플리케이션 개발 부담과 복잡도를 증가시킨다.

### Log Scanner on Database

- DBMS에서 제공하는 트랜잭션 로그에 대한 스캐닝 및 변경 내역에 대한 해석을 통해 CDC 메커니즘을 구현하는 기법이다.
- DBMS에 따라 트랜잭션 로그 관리 메커니즘이 상이하여, 이기종 DB 사용 시 작업 규모가 증가될 수 있어 주의가 필요하다.
- 장점 : DB와 사용 애플리케이션에 영향도 최소화, 변경 식별 지연시간 최소화, 트랜잭션 무결성에 대한 영향도 최소화, 데이터베이스 스키마 변경 불필요

## 구현 방식

### 푸시 방식

데이터 원천에서 변경을 식별하고 대상 시스템에 변경 데이터를 적재해 주는 방식

### 풀 방식

대상 시스템에서 데이터 원천을 정기적으로 살펴보고, 필요 시 데이터를 다운로드 하는 방식