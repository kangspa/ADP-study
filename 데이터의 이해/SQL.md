# SQL이란?

`Structured Query Language`로, DBMS에서 데이터베이스에 명령을 내리는 데이터베이스의 하부 언어이다.

DBMS 마다 문법이 조금씩 다르지만, 기본적인 구조는 비슷하기에 하나의 SQL을 알고 있다면 어렵지 않게 적응 가능하다. 주로 실습 시 MySQL을 통해서 진행하면 쉽다.

## SQL 분류

### 데이터 정의 언어 (DDL, Data Definition Language)

데이터를 정의하는 역할로, 생성, 수정, 삭제 등 전체 골격을 결정하는 역할을 한다.

- `CREATE` : DB 내 테이블을 생성한다.
- `ALTER` : 테이블의 정보를 변경한다.
- `RENAME` : 테이블의 이름을 변경한다.
- `DROP` : 테이블을 삭제한다.
- `TRUNCATE` : 테이블을 초기화한다.

### 데이터 조작 언어 (DML, Data Manipulation Language)

입력된 레코드를 조회, 수정, 삭제하는 역할을 한다.

- `SELECT` : 테이블에 포함된 데이터를 조회한다.
- `INSERT` : 테이블에 데이터를 삽입한다.
- `UPDATE` : 테이블의 데이터를 변경한다.
- `DELETE` : 테이블의 데이터를 삭제한다.

### 데이터 제어 언어 (DCL, Data Control Language)

DB에 접근 및 객체에 권한을 주는 등의 역할을 한다. 보안, 무결성, 회복 등을 정의하는데 사용된다.

- `GRANT` : DBMS 사용자에게 권한을 부여한다.
- `REVOKE` : DBMS 사용자의 권한을 회수한다.
- `COMMIT` : 사용자에 의해 변경된 데이터를 일괄 적용한다.
- `ROLLBACK` : COMMIT이 되지 않았다면 변경사항들에 대한 명령을 철회하거나, 특정 SAVEPOINT로 돌아간다.

이 중 `COMMIT`과 `ROLLBACK`은 아래 작성하는 `TCL`로 구분되기도 한다. (해당 포스팅은 그냥 양쪽 다 작성했다.)

### 트랜잭션 제어 언어 (Transaction Control Language)

트랜잭션을 제어하는 역할을 한다. ([트랜잭션(Transaction)](./2.%20데이터베이스의%20정의와%20특징.md) : 데이터베이스에서 명령을 수행하는 하나의 논리적인 기능의 단위)

- `COMMIT` : 사용자에 의해 변경된 데이터를 일괄 적용한다.
- `ROLLBACK` : COMMIT이 되지 않았다면 변경사항들에 대한 명령을 철회하거나, 특정 SAVEPOINT로 돌아간다.
- `SAVEPOINT` : 현재 데이터의 상태를 기억한다.

# SQL 함수 및 구문

## 집계 함수

| 함수 |설명                             |적용 가능 형태|
|:----:|:--------------------------------|-------------:|
|COUNT |특정 조건이 맞는 데이터 수를 반환|수치형, 문자형|
| AVG  |지정한 열의 평균 값 반환         |        수치형|
| SUM  |지정한 열의 총합 반환            |        수치형|
|STDDEV|지정한 열의 분산 반환            |        수치형|
| MIN  |지정한 열의 최솟값 반환          |        수치형|
| MAX  |지정한 열의 최댓값 반환          |        수치형|

## 주요 구문

| 쿼리명 |설명                                                                                     |
|:------:|:----------------------------------------------------------------------------------------|
| WHERE  |특정 레코드에 대한 조건을 설정할 때 사용되는 구문 (SELECT, UPDATE, DELETE 문 등에서 사용)|
|GROUP BY|데이터를 그룹별로 나눠서 집계 함수 적용을 위해 사용                                      |
| HAVING |그룹별 연산 함수의 결과값에 조건을 적용하기 위해 사용                                    |
|ORDER BY|데이터를 지정된 컬럼으로 정렬하기 위한 구문, 기본은 오름차순이고 `desc`는 내림차순이다.  |

- `WHERE`은 ROW 레벨 필터링을 제공하지만, `HAVING`은 GROUP 레벨 필터링을 제공한다.
- SQL 문법 순서는 아래와 같다.
    - `SELECT` → `FROM` → `WHERE` → `GROUP BY` → `HAVING` → `ORDER BY`