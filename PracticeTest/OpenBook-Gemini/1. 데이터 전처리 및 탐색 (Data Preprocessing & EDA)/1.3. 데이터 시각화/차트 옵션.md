
# 차트 옵션: 축 레이블, 제목, 범례, 서브플롯, 여러 그래프 겹치기

## 개념 요약

그래프를 그리는 것만큼이나, 다른 사람들이 그 그래프를 명확하게 이해할 수 있도록 만드는 것도 중요합니다. `Matplotlib`은 그래프의 거의 모든 요소를 상세하게 설정할 수 있는 풍부한 옵션을 제공합니다. `Seaborn`으로 그린 그래프 역시 `Matplotlib`의 함수들을 이용해 세부 옵션을 조정할 수 있습니다.

- **축 레이블과 제목 (Axis Labels and Title)**: 그래프가 무엇을 나타내는지 알려주는 가장 기본적인 정보입니다. `set_xlabel()`, `set_ylabel()`, `set_title()` 메서드를 사용하여 텍스트, 폰트 크기, 색상 등을 설정합니다.

- **범례 (Legend)**: 하나의 그래프에 여러 데이터 시리즈가 있을 때, 각 시리즈가 무엇을 의미하는지 설명합니다. `plot()` 함수에서 `label` 인자를 지정한 후, `legend()` 메서드를 호출하여 표시합니다.

- **서브플롯 (Subplot)**: 하나의 그림(Figure) 안에 여러 개의 독립된 그래프(Axes)를 격자 형태로 배치하는 기능입니다. `plt.subplots()` 함수를 사용하여 Figure와 여러 개의 Axes 객체를 한 번에 생성할 수 있습니다. 이를 통해 여러 그래프를 나란히 놓고 비교 분석하기 용이합니다.

- **여러 그래프 겹치기**: 하나의 `Axes` 위에 여러 개의 플롯을 연속해서 그리는 것입니다. 예를 들어, 산점도 위에 회귀선을 겹쳐 그리거나, 두 개의 다른 라인 플롯을 함께 그려 비교할 수 있습니다.

## 구현 방법

### 1. 축 레이블, 제목, 범례

- **용도**: 그래프에 대한 설명 정보를 추가하여 가독성을 높입니다.
- **코드 예시**:
  ```python
  import matplotlib.pyplot as plt
  import numpy as np

  x = np.linspace(0, 2 * np.pi, 100)
  y1 = np.sin(x)
  y2 = np.cos(x)

  # Figure와 Axes 객체 생성
  fig, ax = plt.subplots(figsize=(8, 5))

  # 그래프 그리기 (label 인자 지정)
  ax.plot(x, y1, label='Sine', color='blue')
  ax.plot(x, y2, label='Cosine', color='red', linestyle='--')

  # 제목과 축 레이블 설정
  ax.set_title('Sine and Cosine Waves', fontsize=16, fontweight='bold')
  ax.set_xlabel('Radian', fontsize=12)
  ax.set_ylabel('Value', fontsize=12)

  # 범례 표시 (loc='best'는 최적의 위치에 자동으로 배치)
  ax.legend(loc='upper right', fontsize=10)

  # 그리드 추가
  ax.grid(True)

  plt.show()
  ```
- **결과 해석**: 제목, x축/y축 레이블, 범례가 모두 포함되어 그래프가 무엇을 나타내는지 명확하게 이해할 수 있습니다. `fontsize`, `fontweight`, `color`, `linestyle` 등 다양한 파라미터를 통해 디자인을 변경할 수 있습니다.

### 2. 서브플롯 (Subplots)

- **용도**: 여러 그래프를 하나의 그림 안에 배열하여 비교 분석합니다.
- **주의사항**: `plt.subplots(nrows, ncols)`는 `Figure` 객체와 `nrows` x `ncols` 크기의 `Axes` 객체 배열을 반환합니다. 각 `Axes` 객체에 접근하여 개별 그래프를 그립니다.
- **코드 예시**:
  ```python
  # 2x2 형태의 서브플롯 생성
  fig, axes = plt.subplots(nrows=2, ncols=2, figsize=(10, 8))

  # 전체 제목 설정
  fig.suptitle('Various Plots in Subplots', fontsize=16)

  # 첫 번째 서브플롯 (0, 0)
  axes[0, 0].plot(x, y1, color='green')
  axes[0, 0].set_title('Sine Wave')

  # 두 번째 서브플롯 (0, 1)
  axes[0, 1].plot(x, y2, color='orange')
  axes[0, 1].set_title('Cosine Wave')

  # 세 번째 서브플롯 (1, 0) - 히스토그램
  data = np.random.randn(1000)
  axes[1, 0].hist(data, bins=30, color='purple')
  axes[1, 0].set_title('Histogram')

  # 네 번째 서브플롯 (1, 1) - 산점도
  x_scatter = np.random.rand(50)
  y_scatter = np.random.rand(50)
  axes[1, 1].scatter(x_scatter, y_scatter, color='magenta')
  axes[1, 1].set_title('Scatter Plot')

  # 레이아웃 자동 조정
  plt.tight_layout(rect=[0, 0, 1, 0.96]) # suptitle과 겹치지 않도록 조정

  plt.show()
  ```
- **결과 해석**: 2x2 격자 안에 4개의 서로 다른 그래프가 각각의 제목과 함께 그려졌습니다. `axes` 배열의 인덱싱을 통해 각 위치에 원하는 그래프를 그릴 수 있습니다. `plt.tight_layout()`은 서브플롯들이 겹치지 않도록 자동으로 간격을 조정해주는 유용한 함수입니다.

### 3. 여러 그래프 겹치기

- **용도**: 동일한 축을 공유하는 여러 종류의 그래프를 함께 그려 풍부한 정보를 전달합니다.
- **주의사항**: 두 번째 그래프를 그릴 때, 축을 공유해야 합니다. 만약 y축의 스케일이 완전히 다른 두 그래프를 겹치고 싶다면, `twinx()`를 사용하여 보조 y축을 만들 수 있습니다.
- **코드 예시**:
  ```python
  import seaborn as sns
  tips = sns.load_dataset('tips')

  # 1. 동일한 Axes에 겹쳐 그리기 (KDE + Rug plot)
  fig, ax = plt.subplots()
  sns.kdeplot(data=tips, x="total_bill", ax=ax, color='blue', label='KDE')
  sns.rugplot(data=tips, x="total_bill", ax=ax, color='black', label='Rug')
  ax.legend()
  ax.set_title('KDE and Rug Plot of Total Bill')
  plt.show()

  # 2. 보조 Y축 사용하기 (twinx)
  fig, ax1 = plt.subplots(figsize=(8, 5))

  # 첫 번째 Y축 (ax1) - 바 차트
  sales_data = {'month': ['Jan', 'Feb', 'Mar', 'Apr'], 'sales': [100, 120, 150, 130]}
  ax1.bar(sales_data['month'], sales_data['sales'], color='skyblue', label='Sales')
  ax1.set_xlabel('Month')
  ax1.set_ylabel('Sales (units)', color='skyblue')
  ax1.tick_params(axis='y', labelcolor='skyblue')

  # 두 번째 Y축 (ax2) - 라인 플롯
  ax2 = ax1.twinx()
  growth_data = {'growth': [0.05, 0.2, 0.1, -0.05]}
  ax2.plot(sales_data['month'], growth_data['growth'], color='red', marker='o', label='Growth Rate')
  ax2.set_ylabel('Growth Rate', color='red')
  ax2.tick_params(axis='y', labelcolor='red')
  ax2.axhline(0, color='gray', linestyle='--') # 성장률 0 기준선

  fig.suptitle('Sales and Growth Rate')
  fig.tight_layout()
  plt.show()
  ```
- **결과 해석**:
  - 첫 번째 예시는 커널 밀도 추정(KDE) 그래프 아래에 각 데이터의 위치를 나타내는 러그 플롯(rug plot)을 겹쳐 그려 분포를 더 상세하게 보여줍니다.
  - 두 번째 예시는 월별 판매량(바 차트)과 전월 대비 성장률(라인 플롯)을 하나의 그래프에 함께 보여줍니다. 두 데이터의 단위와 스케일이 다르기 때문에, `twinx()`를 사용하여 왼쪽과 오른쪽에 각각의 y축을 만들어 표현했습니다.
