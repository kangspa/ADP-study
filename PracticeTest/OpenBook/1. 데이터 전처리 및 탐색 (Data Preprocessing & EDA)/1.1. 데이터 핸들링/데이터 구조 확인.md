
# 데이터 구조 확인

## 개념 요약

데이터를 불러온 후, 본격적인 분석에 앞서 데이터의 기본적인 구조와 상태를 파악하는 것은 매우 중요합니다. 이 과정을 통해 데이터의 크기, 변수의 종류와 데이터 타입, 결측치의 유무, 통계적 특성 등을 빠르게 파악하고 데이터 전처리의 방향을 설정할 수 있습니다. Pandas는 이를 위한 다양한 메서드를 제공합니다.

- **`head()` / `tail()`**: 데이터프레임의 처음 또는 마지막 몇 개 행을 출력하여 데이터의 형태와 내용을 빠르게 확인합니다.
- **`info()`**: 데이터프레임의 전체적인 정보를 요약하여 보여줍니다. 각 열의 이름, 데이터 타입, non-null(결측치가 아닌) 데이터의 개수, 메모리 사용량 등을 한눈에 파악할 수 있습니다.
- **`describe()`**: 수치형(numerical) 데이터 열에 대한 주요 기술 통계량을 요약하여 보여줍니다. (개수, 평균, 표준편차, 최소값, 사분위수, 최대값)
- **`shape`**: 데이터프레임의 차원(행의 수, 열의 수)을 튜플 형태로 반환합니다.
- **`isnull().sum()`**: 각 열에 포함된 결측치(NaN)의 개수를 계산하여 보여줍니다. 데이터 정제의 첫 단계로, 결측치 처리 전략을 세우는 데 필수적입니다.

## 적용 가능한 상황

- **초기 데이터 탐색**: CSV, Excel 등 외부 소스에서 데이터를 처음 불러왔을 때, 데이터가 올바르게 로드되었는지, 어떤 변수들이 있는지 확인하는 가장 첫 단계에서 사용합니다.
- **데이터 클리닝 계획 수립**: `info()`와 `isnull().sum()`을 통해 변수들의 데이터 타입이 적절한지(예: 숫자가 object로 되어있지 않은지), 결측치가 얼마나, 어디에 있는지 파악하여 처리 계획을 세울 때 사용합니다.
- **데이터 특징 파악**: `describe()`를 통해 수치형 변수들의 분포(평균, 편차, 범위 등)를 개략적으로 파악하고, 이상치의 존재 가능성을 짐작할 때 사용합니다.
- **데이터 조작 후 확인**: 필터링, 결합 등 데이터프레임을 변경하는 작업을 수행한 후, `shape`이나 `head()`를 통해 의도한 대로 데이터가 변경되었는지 확인할 때 사용합니다.

## 구현 방법

### 예제 데이터프레임 생성

모든 예제는 아래의 데이터프레임을 기반으로 합니다.

```python
import pandas as pd
import numpy as np

data = {'ID': [1, 2, 3, 4, 5],
        'Name': ['Alice', 'Bob', 'Charlie', 'David', 'Eve'],
        'Age': [25, 30, np.nan, 40, 30],
        'Salary': [70000, 80000, 50000, 95000, 70000],
        'JoinDate': pd.to_datetime(['2020-01-10', '2018-05-20', '2021-09-01', '2017-03-15', '2020-01-10'])}
df = pd.DataFrame(data)
```

### 1. `head()` / `tail()`

- **용도**: 데이터의 일부를 직접 눈으로 확인합니다.
- **주의사항**: 기본값은 5행을 보여줍니다. 괄호 안에 원하는 행의 수를 지정할 수 있습니다. (e.g., `df.head(3)`)
- **코드 예시**:
  ```python
  # 데이터프레임의 첫 3개 행 출력
  print(df.head(3))

  # 데이터프레임의 마지막 2개 행 출력
  print(df.tail(2))
  ```
- **결과 해석**:
  `head(3)`의 결과는 아래와 같으며, 데이터의 전반적인 형태와 열의 종류, 값의 대략적인 내용을 파악할 수 있습니다.
  ```
     ID     Name   Age  Salary   JoinDate
  0   1    Alice  25.0   70000 2020-01-10
  1   2      Bob  30.0   80000 2018-05-20
  2   3  Charlie   NaN   50000 2021-09-01
  ```

### 2. `info()`

- **용도**: 데이터프레임의 기술적인 요약 정보를 확인합니다.
- **주의사항**: `Non-Null Count`를 전체 행의 수(`RangeIndex`)와 비교하여 결측치 유무를 빠르게 파악할 수 있습니다. `Dtype`을 통해 데이터 타입이 의도와 다른 경우(e.g., 숫자가 `object` 타입)를 찾아낼 수 있습니다.
- **코드 예시**:
  ```python
  df.info()
  ```
- **결과 해석**:
  ```
  <class 'pandas.core.frame.DataFrame'>
  RangeIndex: 5 entries, 0 to 4
  Data columns (total 5 columns):
   #   Column    Non-Null Count  Dtype         
  ---  ------    --------------  -----         
   0   ID        5 non-null      int64         
   1   Name      5 non-null      object        
   2   Age       4 non-null      float64       
   3   Salary    5 non-null      int64         
   4   JoinDate  5 non-null      datetime64[ns]
  dtypes: datetime64[ns](1), float64(1), int64(2), object(1)
  memory usage: 328.0+ bytes
  ```
  - 전체 5개의 행(`RangeIndex: 5 entries`)이 있음을 알 수 있습니다.
  - `Age` 열은 `4 non-null`이므로 1개의 결측치가 있음을 짐작할 수 있습니다.
  - `Name`은 문자열이므로 `object` 타입, `JoinDate`는 날짜이므로 `datetime64[ns]` 타입으로 올바르게 인식되었습니다.
  - `Age`는 결측치(NaN) 때문에 정수(int)가 아닌 실수(float) 타입으로 저장되었습니다.

### 3. `describe()`

- **용도**: 수치형 데이터의 분포와 중심 경향성, 산포도를 파악합니다.
- **주의사항**: 기본적으로 수치형(int, float) 열에 대해서만 통계를 계산합니다. 범주형이나 날짜형 데이터를 포함하려면 `include` 인자를 사용해야 합니다.
- **코드 예시**:
  ```python
  # 수치형 데이터에 대한 기술 통계
  print(df.describe())

  # 모든 데이터 타입에 대한 기술 통계
  print(df.describe(include='all', datetime_is_numeric=True))
  ```
- **결과 해석**:
  - **수치형 데이터**: 
    ```
             ID        Age        Salary
    count   5.000000   4.000000      5.000000
    mean    3.000000  31.250000  73000.000000
    std     1.581139   6.291529  17521.415479
    min     1.000000  25.000000  50000.000000
    25%     2.000000  28.750000  70000.000000
    50%     3.000000  30.000000  70000.000000
    75%     4.000000  32.500000  80000.000000
    max     5.000000  40.000000  95000.000000
    ```
    - `Age`의 `count`가 4로, 결측치가 있음을 다시 확인할 수 있습니다.
    - `Salary`의 평균(`mean`)은 73000이고, 중앙값(`50%`)은 70000입니다. 평균이 중앙값보다 높은 것으로 보아, 분포가 약간 오른쪽으로 치우쳐 있을 수 있음을 추측할 수 있습니다.
    - `min`과 `max`를 통해 각 변수의 값 범위를 알 수 있습니다.
  - **`include='all'` 사용 시**: 범주형/날짜형 데이터에 대해 `unique`(고유값 개수), `top`(최빈값), `freq`(최빈값의 빈도) 등이 추가로 표시됩니다.

### 4. `shape`

- **용도**: 데이터의 크기(행, 열 개수)를 확인합니다.
- **주의사항**: `shape`은 메서드가 아닌 속성(attribute)이므로, `()` 없이 사용합니다.
- **코드 예시**:
  ```python
  print(df.shape)
  ```
- **결과 해석**:
  ```
  (5, 5)
  ```
  데이터프레임이 5개의 행과 5개의 열로 구성되어 있음을 의미합니다.

### 5. `isnull().sum()`

- **용도**: 열별 결측치의 개수를 확인합니다.
- **주의사항**: `isnull()`은 각 셀이 결측치인지 여부를 True/False로 반환하는 데이터프레임을 생성합니다. 여기에 `sum()`을 적용하면, `True`를 1로 간주하여 각 열의 `True` 개수(즉, 결측치 개수)를 합산해줍니다.
- **코드 예시**:
  ```python
  print(df.isnull().sum())
  ```
- **결과 해석**:
  ```
  ID          0
  Name        0
  Age         1
  Salary      0
  JoinDate    0
  dtype: int64
  ```
  `Age` 열에 1개의 결측치가 있고, 나머지 열에는 결측치가 없음을 명확하게 보여줍니다.

## 장단점 및 대안

| 메서드/속성 | 장점 | 단점 | 대안/보완 |
|---|---|---|---|
| **`head()` / `tail()`** | 데이터의 실제 모습을 빠르고 직관적으로 확인 가능 | 데이터 전체가 아닌 일부만 보여주므로 전체적인 특징 파악에는 한계 | `df.sample(5)` (무작위로 5개 행을 샘플링하여 확인) |
| **`info()`** | 데이터프레임의 전체 구조, 메모리 사용량, Dtype, 결측치 유무를 한 번에 요약 | 통계적인 정보는 제공하지 않음 | `describe()` (통계 정보 확인), `df.dtypes` (데이터 타입만 확인) |
| **`describe()`** | 수치 데이터의 분포와 이상치 존재 가능성을 빠르게 파악 | 범주형 데이터에 대한 정보는 기본적으로 제공하지 않음 | `df['col'].value_counts()` (범주형 데이터의 빈도수 확인), 시각화(히스토그램, 박스플롯)를 통해 분포를 더 자세히 파악 |
| **`shape`** | 데이터의 크기를 가장 간결하게 알려줌 | 크기 외 다른 정보는 없음 | `len(df)` (행의 개수만 확인), `df.columns` (열 이름 확인) |
| **`isnull().sum()`** | 열별 결측치 개수를 명확하고 간결하게 보여줌 | 결측치의 비율이나 분포 패턴은 알 수 없음 | `df.isnull().mean()` (열별 결측치 비율 확인), `seaborn.heatmap(df.isnull())` (결측치 분포 시각화) |
